import{a as b}from"./chunk-YIMOMAR2.js";import{Ca as y,Da as x,Ha as r,Ia as s,J as S,Ja as p,Ka as T,La as c,Ma as m,Sa as I,Ta as l,U as d,V as u,Va as C,ma as a,qa as g,ua as v,wa as _}from"./chunk-KH5FCWQU.js";var f=class i{timer=Number(localStorage.getItem("time"))||300;setTimer(t){this.timer=t}getTime(){return this.timer}static \u0275fac=function(e){return new(e||i)};static \u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})};function V(i,t){if(i&1){let e=T();r(0,"span",12),c("click",function(){d(e);let o=m();return u(o.toggleEdit())}),l(1),s()}if(i&2){let e=m();a(),C(" ",e.formattedTime," ")}}function D(i,t){if(i&1){let e=T();r(0,"div",6),p(1,"input",13,0),r(3,"div",14)(4,"button",15),c("click",function(){d(e);let o=I(2),h=m();return u(h.setTimeManually(o.value))}),l(5,"Confirmar"),s(),r(6,"button",16),c("click",function(){d(e);let o=m();return u(o.toggleEdit())}),l(7,"Cancelar"),s()()()}if(i&2){let e=m();a(),y("value",e.formattedTime)}}function M(i,t){i&1&&p(0,"img",9)}function O(i,t){i&1&&p(0,"img",10)}var w=class i{constructor(t,e){this.timerService=t;this.soundService=e}timeInSeconds;selectedTime;audio;timer=null;editing=!1;playing=!1;ngOnInit(){this.timeInSeconds=this.timerService.getTime(),this.selectedTime=this.timeInSeconds,this.audio=new Audio(this.soundService.getSound().src)}ngOnDestroy(){this.stop()}get formattedTime(){let t=Math.floor(this.timeInSeconds/3600),e=Math.floor(this.timeInSeconds%3600/60),n=this.timeInSeconds%60;return`${this.pad(t)}:${this.pad(e)}:${this.pad(n)}`}toggleEdit(){this.editing=!this.editing}setTimeManually(t){let[e,n,o]=t.split(":").map(h=>parseInt(h,10)||0);this.timeInSeconds=e*3600+n*60+o,this.setTimeVariables(),this.editing=!1}start(){this.timer||this.timeInSeconds<=0||(this.timer=setInterval(()=>{this.timeInSeconds>0?(this.timeInSeconds--,this.timerService.setTimer(this.timeInSeconds),this.playing=!0):(this.stop(),this.playSound(),this.playing=!1)},1e3))}reset(){this.stop(),this.timeInSeconds=this.selectedTime,this.setTimeVariables(),this.audio.pause()}stop(){clearInterval(this.timer),this.timer=null,this.playing=!1}playSound(){let t=0,e=()=>{t<3&&(this.audio.currentTime=0,this.audio.play(),t++)};this.audio.addEventListener("ended",e,{once:!1}),e()}setTimeVariables(){this.selectedTime=this.timeInSeconds,this.timerService.setTimer(this.timeInSeconds),localStorage.setItem("time",this.timeInSeconds.toString())}pad(t){return t<10?`0${t}`:`${t}`}static \u0275fac=function(e){return new(e||i)(g(f),g(b))};static \u0275cmp=v({type:i,selectors:[["app-timer"]],decls:14,vars:2,consts:[["timeInput",""],[1,"w-full","h-full","flex","flex-col","gap-y-8","items-center","justify-center","p-2","sm:p-0","text-white"],[1,"text-center","flex","flex-col","gap-y-2"],[1,"font-bold","text-3xl"],[1,"text-sm"],[1,"text-5xl","font-mono","cursor-pointer","select-none"],[1,"flex","flex-col","items-center","gap-4"],[1,"flex","gap-8","mt-6"],[1,"cursor-pointer",3,"click"],["src","icons/pause.png","alt","Play",1,"w-7","h-7"],["src","icons/play.png","alt","Pause",1,"w-7","h-7"],["src","icons/replay.png","alt","Replay",1,"w-7","h-7"],[1,"text-5xl","font-mono","cursor-pointer","select-none",3,"click"],["type","text",1,"text-3xl","font-mono","text-center","border","rounded","px-2","py-1","w-[70%]",3,"value"],[1,"flex","gap-4"],[1,"px-4","py-2","rounded","bg-green-400","text-white","cursor-pointer","hover:bg-green-500","transition",3,"click"],[1,"px-4","py-2","rounded","bg-gray-400","text-white","cursor-pointer","hover:bg-gray-500","transition",3,"click"]],template:function(e,n){e&1&&(r(0,"main",1)(1,"div",2)(2,"h1",3),l(3,"Timer"),s(),r(4,"p",4),l(5,"D\xEA dois cliques sobre o hor\xE1rio para altera-lo"),s()(),_(6,V,2,1,"span",5)(7,D,8,1,"div",6),r(8,"div",7)(9,"button",8),c("click",function(){return n.playing?n.stop():n.start()}),_(10,M,1,0,"img",9)(11,O,1,0,"img",10),s(),r(12,"button",8),c("click",function(){return n.reset()}),p(13,"img",11),s()()()),e&2&&(a(6),x(n.editing?7:6),a(4),x(n.playing?10:11))},encapsulation:2})};export{w as TimerComponent};
