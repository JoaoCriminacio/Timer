import{a as E}from"./chunk-KNTEGQ2T.js";import{Ca as T,Da as _,Ha as r,Ia as s,J as v,Ja as f,Ka as S,La as l,Ma as c,Sa as y,Ta as a,U as d,V as u,Va as b,Xa as C,hb as w,ma as m,qa as x,ua as I,wa as g}from"./chunk-WCZZYUDQ.js";var h=class i{timer=Number(localStorage.getItem("time"))||300;setTimer(e){this.timer=e}getTime(){return this.timer}static \u0275fac=function(t){return new(t||i)};static \u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"})};var M=(i,e)=>({"cursor-pointer":i,"cursor-not-allowed opacity-50":e}),D=(i,e)=>({"cursor-not-allowed":i,"cursor-pointer":e});function O(i,e){i&1&&a(0," Clique sobre o hor\xE1rio para altera-lo ")}function j(i,e){i&1&&a(0," Pare o timer para alterar o hor\xE1rio ")}function F(i,e){if(i&1){let t=S();r(0,"span",13),l("click",function(){d(t);let o=c();return u(!o.isTimerPlaying&&o.toggleEdit())}),a(1),s()}if(i&2){let t=c();T("ngClass",C(2,D,t.isTimerPlaying,!t.isTimerPlaying)),m(),b(" ",t.formattedTime," ")}}function $(i,e){if(i&1){let t=S();r(0,"div",6)(1,"input",14,0),l("keyup.enter",function(){d(t);let o=y(2),p=c();return u(p.setTimeManually(o.value))}),s(),r(3,"div",15)(4,"button",16),l("click",function(){d(t);let o=y(2),p=c();return u(p.setTimeManually(o.value))}),a(5,"Confirmar "),s(),r(6,"button",17),l("click",function(){d(t);let o=c();return u(o.toggleEdit())}),a(7,"Cancelar "),s()()()}if(i&2){let t=c();m(),T("value",t.formattedTime)}}function A(i,e){i&1&&(f(0,"img",18),r(1,"span",10),a(2,"Parar Timer"),s())}function N(i,e){i&1&&(f(0,"img",19),r(1,"span",10),a(2,"Iniciar Timer"),s())}var P=class i{constructor(e,t){this.timerService=e;this.soundService=t}timeInSeconds;selectedTime;audio;timer=null;isEditing=!1;isTimerPlaying=!1;isSoundPlaying=!1;ngOnInit(){this.timeInSeconds=this.timerService.getTime(),this.selectedTime=this.timeInSeconds,this.audio=new Audio(this.soundService.getSound().src)}ngOnDestroy(){this.stopTimer(),this.stopMusic()}get formattedTime(){let e=Math.floor(this.timeInSeconds/3600),t=Math.floor(this.timeInSeconds%3600/60),n=this.timeInSeconds%60;return`${this.pad(e)}:${this.pad(t)}:${this.pad(n)}`}toggleEdit(){this.isEditing=!this.isEditing}setTimeManually(e){let[t,n,o]=e.split(":").map(p=>parseInt(p,10)||0);this.timeInSeconds=t*3600+n*60+o,this.setTimeVariables(),this.isEditing=!1}start(){this.timer||this.timeInSeconds<=0||(this.timer=setInterval(()=>{this.timeInSeconds>0?(this.timeInSeconds--,this.timerService.setTimer(this.timeInSeconds),this.isTimerPlaying=!0):(this.stopTimer(),this.playSound(),this.isTimerPlaying=!1)},1e3))}reset(){this.stopTimer(),this.timeInSeconds=this.selectedTime,this.setTimeVariables(),this.audio.pause()}stopTimer(){clearInterval(this.timer),this.timer=null,this.isTimerPlaying=!1}stopMusic(){this.audio.pause(),this.isSoundPlaying=!1}playSound(){this.isSoundPlaying=!0;let e=0,t=()=>{e<3?(this.audio.currentTime=0,this.audio.play(),e++):this.isSoundPlaying=!1};this.audio.addEventListener("ended",t,{once:!1}),t()}setTimeVariables(){this.selectedTime=this.timeInSeconds,this.timerService.setTimer(this.timeInSeconds),localStorage.setItem("time",this.timeInSeconds.toString())}pad(e){return e<10?`0${e}`:`${e}`}static \u0275fac=function(t){return new(t||i)(x(h),x(E))};static \u0275cmp=I({type:i,selectors:[["app-timer"]],decls:21,vars:7,consts:[["timeInput",""],[1,"w-full","h-full","flex","flex-col","gap-y-8","items-center","justify-center","p-2","sm:p-0","text-white"],[1,"text-center","flex","flex-col","gap-y-2"],[1,"font-bold","text-3xl"],[1,"text-sm"],[1,"text-5xl","font-mono","cursor-pointer","select-none",3,"ngClass"],[1,"flex","flex-col","items-center","gap-4"],[1,"flex","gap-8","mt-6"],[1,"tooltip",3,"click","ngClass"],["src","icons/stop.png","alt","Replay",1,"w-7","h-7"],[1,"tooltiptext","mt-1"],[1,"cursor-pointer","tooltip",3,"click"],["src","icons/replay.png","alt","Replay",1,"w-7","h-7"],[1,"text-5xl","font-mono","cursor-pointer","select-none",3,"click","ngClass"],["type","text",1,"text-3xl","font-mono","text-center","border","rounded","px-2","py-1","w-[70%]",3,"keyup.enter","value"],[1,"flex","gap-4"],[1,"px-4","py-2","rounded","bg-green-400","text-white","cursor-pointer","hover:bg-green-500","transition",3,"click"],[1,"px-4","py-2","rounded","bg-gray-400","text-white","cursor-pointer","hover:bg-gray-500","transition",3,"click"],["src","icons/pause.png","alt","Play",1,"w-7","h-7"],["src","icons/play.png","alt","Pause",1,"w-7","h-7"]],template:function(t,n){t&1&&(r(0,"main",1)(1,"div",2)(2,"h1",3),a(3,"Timer"),s(),r(4,"p",4),g(5,O,1,0)(6,j,1,0),s()(),g(7,F,2,5,"span",5)(8,$,8,1,"div",6),r(9,"div",7)(10,"button",8),l("click",function(){return n.stopMusic()}),f(11,"img",9),r(12,"span",10),a(13,"Parar M\xFAsica"),s()(),r(14,"button",11),l("click",function(){return n.isTimerPlaying?n.stopTimer():n.start()}),g(15,A,3,0)(16,N,3,0),s(),r(17,"button",11),l("click",function(){return n.reset()}),f(18,"img",12),r(19,"span",10),a(20,"Resetar Timer"),s()()()()),t&2&&(m(5),_(n.isTimerPlaying?6:5),m(2),_(n.isEditing?8:7),m(3),T("ngClass",C(4,M,n.isSoundPlaying,!n.isSoundPlaying)),m(5),_(n.isTimerPlaying?15:16))},dependencies:[w],encapsulation:2})};export{P as TimerComponent};
