import{a as k}from"./chunk-KNTEGQ2T.js";import{Ca as T,Da as g,Ha as r,Ia as s,J as v,Ja as p,Ka as S,La as c,Ma as m,Sa as C,Ta as a,U as d,V as u,Va as I,Xa as b,hb as w,ma as l,qa as x,ua as y,wa as f}from"./chunk-WCZZYUDQ.js";var h=class i{timer=Number(localStorage.getItem("time"))||300;setTimer(t){this.timer=t}getTime(){return this.timer}static \u0275fac=function(e){return new(e||i)};static \u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"})};var D=(i,t)=>({"cursor-not-allowed":i,"cursor-pointer":t});function O(i,t){i&1&&a(0," Clique sobre o hor\xE1rio para altera-lo ")}function j(i,t){i&1&&a(0," Pare o timer para alterar o hor\xE1rio ")}function $(i,t){if(i&1){let e=S();r(0,"span",12),c("click",function(){d(e);let o=m();return u(!o.playing&&o.toggleEdit())}),a(1),s()}if(i&2){let e=m();T("ngClass",b(2,D,e.playing,!e.playing)),l(),I(" ",e.formattedTime," ")}}function N(i,t){if(i&1){let e=S();r(0,"div",6),p(1,"input",13,0),r(3,"div",14)(4,"button",15),c("click",function(){d(e);let o=C(2),_=m();return u(_.setTimeManually(o.value))}),a(5,"Confirmar"),s(),r(6,"button",16),c("click",function(){d(e);let o=m();return u(o.toggleEdit())}),a(7,"Cancelar"),s()()()}if(i&2){let e=m();l(),T("value",e.formattedTime)}}function P(i,t){i&1&&p(0,"img",9)}function A(i,t){i&1&&p(0,"img",10)}var E=class i{constructor(t,e){this.timerService=t;this.soundService=e}timeInSeconds;selectedTime;audio;timer=null;editing=!1;playing=!1;ngOnInit(){this.timeInSeconds=this.timerService.getTime(),this.selectedTime=this.timeInSeconds,this.audio=new Audio(this.soundService.getSound().src)}ngOnDestroy(){this.stop()}get formattedTime(){let t=Math.floor(this.timeInSeconds/3600),e=Math.floor(this.timeInSeconds%3600/60),n=this.timeInSeconds%60;return`${this.pad(t)}:${this.pad(e)}:${this.pad(n)}`}toggleEdit(){this.editing=!this.editing}setTimeManually(t){let[e,n,o]=t.split(":").map(_=>parseInt(_,10)||0);this.timeInSeconds=e*3600+n*60+o,this.setTimeVariables(),this.editing=!1}start(){this.timer||this.timeInSeconds<=0||(this.timer=setInterval(()=>{this.timeInSeconds>0?(this.timeInSeconds--,this.timerService.setTimer(this.timeInSeconds),this.playing=!0):(this.stop(),this.playSound(),this.playing=!1)},1e3))}reset(){this.stop(),this.timeInSeconds=this.selectedTime,this.setTimeVariables(),this.audio.pause()}stop(){clearInterval(this.timer),this.timer=null,this.playing=!1}playSound(){let t=0,e=()=>{t<3&&(this.audio.currentTime=0,this.audio.play(),t++)};this.audio.addEventListener("ended",e,{once:!1}),e()}setTimeVariables(){this.selectedTime=this.timeInSeconds,this.timerService.setTimer(this.timeInSeconds),localStorage.setItem("time",this.timeInSeconds.toString())}pad(t){return t<10?`0${t}`:`${t}`}static \u0275fac=function(e){return new(e||i)(x(h),x(k))};static \u0275cmp=y({type:i,selectors:[["app-timer"]],decls:15,vars:3,consts:[["timeInput",""],[1,"w-full","h-full","flex","flex-col","gap-y-8","items-center","justify-center","p-2","sm:p-0","text-white"],[1,"text-center","flex","flex-col","gap-y-2"],[1,"font-bold","text-3xl"],[1,"text-sm"],[1,"text-5xl","font-mono","cursor-pointer","select-none",3,"ngClass"],[1,"flex","flex-col","items-center","gap-4"],[1,"flex","gap-8","mt-6"],[1,"cursor-pointer",3,"click"],["src","icons/pause.png","alt","Play",1,"w-7","h-7"],["src","icons/play.png","alt","Pause",1,"w-7","h-7"],["src","icons/replay.png","alt","Replay",1,"w-7","h-7"],[1,"text-5xl","font-mono","cursor-pointer","select-none",3,"click","ngClass"],["type","text",1,"text-3xl","font-mono","text-center","border","rounded","px-2","py-1","w-[70%]",3,"value"],[1,"flex","gap-4"],[1,"px-4","py-2","rounded","bg-green-400","text-white","cursor-pointer","hover:bg-green-500","transition",3,"click"],[1,"px-4","py-2","rounded","bg-gray-400","text-white","cursor-pointer","hover:bg-gray-500","transition",3,"click"]],template:function(e,n){e&1&&(r(0,"main",1)(1,"div",2)(2,"h1",3),a(3,"Timer"),s(),r(4,"p",4),f(5,O,1,0)(6,j,1,0),s()(),f(7,$,2,5,"span",5)(8,N,8,1,"div",6),r(9,"div",7)(10,"button",8),c("click",function(){return n.playing?n.stop():n.start()}),f(11,P,1,0,"img",9)(12,A,1,0,"img",10),s(),r(13,"button",8),c("click",function(){return n.reset()}),p(14,"img",11),s()()()),e&2&&(l(5),g(n.playing?6:5),l(2),g(n.editing?8:7),l(4),g(n.playing?11:12))},dependencies:[w],encapsulation:2})};export{E as TimerComponent};
